(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{616:function(t,s,a){"use strict";a.r(s);var n=a(35),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"贡献指南"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#贡献指南"}},[t._v("#")]),t._v(" 贡献指南")]),t._v(" "),a("h2",{attrs:{id:"_1-理念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-理念"}},[t._v("#")]),t._v(" 1. 理念")]),t._v(" "),a("h3",{attrs:{id:"_1-1-开发者和使用者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-开发者和使用者"}},[t._v("#")]),t._v(" 1.1. 开发者和使用者")]),t._v(" "),a("p",[t._v("组件库有两面，一面朝向开发者，一面朝向使用者。其实所有的工具都有这两面，不过大部分工具可能是个人开发，或者后期改动频率不高，所以朝向开发者的一面并不显著，而组件库（尤其是业务组件库）改动相对频繁，这两面都很重要。")]),t._v(" "),a("p",[t._v("Press Plus 面向开发者时，追求"),a("strong",[t._v("高效、自动化")]),t._v("，让开发者少介入，少犯错，比如：")]),t._v(" "),a("ul",[a("li",[t._v("文档和示例就近编写，方便维护，由脚本自动派发")]),t._v(" "),a("li",[t._v("CI 持续集成，多端在线示例自动更新")]),t._v(" "),a("li",[t._v("一键新增组件")]),t._v(" "),a("li",[t._v("一键发布组件库")]),t._v(" "),a("li",[t._v("自动生成 "),a("code",[t._v("Change Log")])]),t._v(" "),a("li",[t._v("自动生成 "),a("code",[t._v("Props/Event")]),t._v(" 文档")]),t._v(" "),a("li",[t._v("一键更新 "),a("code",[t._v("name/emits")]),t._v(" 属性")])]),t._v(" "),a("p",[t._v("Press Plus 面向使用者时，追求"),a("strong",[t._v("简单、易用")]),t._v("，比如：")]),t._v(" "),a("ul",[a("li",[t._v("统一的代码规范、命名规范，如统一全局 "),a("code",[t._v("QQ")]),t._v("、"),a("code",[t._v("WX")]),t._v("、"),a("code",[t._v("PC")]),t._v(" 的使用")]),t._v(" "),a("li",[t._v("不使用简写，减少使用者负担")]),t._v(" "),a("li",[t._v("渐进式增强，允许 H5 平台更多的灵活性")]),t._v(" "),a("li",[t._v("封装 Vue3 和非 "),a("code",[t._v("uni-app")]),t._v(" 环境下的适配器")]),t._v(" "),a("li",[t._v("多种组件支持函数式调用")]),t._v(" "),a("li",[t._v("始终向后兼容，业务安全升级")])]),t._v(" "),a("h2",{attrs:{id:"_2-目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-目录结构"}},[t._v("#")]),t._v(" 2. 目录结构")]),t._v(" "),a("p",[t._v("项目结构如下：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("- docs            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 文档地址")]),t._v("\n- plugin          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# [demo]工程用到的插件")]),t._v("\n- script          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 脚本")]),t._v("\n- tests           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 测试用例")]),t._v("\n- src\n  - common        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# [demo]公共内容")]),t._v("\n  - packages      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 对外发布的包内容")]),t._v("\n  - pages         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# [demo]页面内容")]),t._v("\n  - static        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# [demo]静态内容")]),t._v("\n  - App.vue       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# [demo]应用入口")]),t._v("\n  - main.js\n  - pages.json\n")])])]),a("p",[t._v("组件库除了组件外，还有文档、示例、工程化配置等部分。为了维护起来方便，将示例、文档、组件都放在一个文件夹里，所以一个标准的组件目录如下：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("- press-button\n  - demo-helper/        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 非必需，组件示例相关数据、方法")]),t._v("\n  - helper/             "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 非必需，业务层处理数据的相关方法，可能引入 t-comm 第三方模块")]),t._v("\n  - demo.vue            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 组件示例")]),t._v("\n  - press-button.vue    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 组件")]),t._v("\n  - README.md           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 组件中文文档")]),t._v("\n  - README.en-US.md     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 组件英文文档")]),t._v("\n")])])]),a("p",[a("code",[t._v("src/packages")]),t._v("下就是由这些组件文件夹和一些公共文件构成。")]),t._v(" "),a("p",[t._v("上面的组织结构并不能直接用，还需要把"),a("code",[t._v("README.md")]),t._v("移动到"),a("code",[t._v("docs")]),t._v("中，把"),a("code",[t._v("demo.vue")]),t._v("移动到"),a("code",[t._v("src/pages")]),t._v("中。开发时会监听这些文件变动，发生变动后就把它们拷贝到需要的位置上。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2023/10/own_mike_2de0d5cb1567b66aa7.png",width:"700"}})]),t._v(" "),a("h2",{attrs:{id:"_3-开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-开发"}},[t._v("#")]),t._v(" 3. 开发")]),t._v(" "),a("p",[t._v("首先要执行如下命令，进行组件的派发：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run init\n")])])]),a("h3",{attrs:{id:"_3-1-组件开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-组件开发"}},[t._v("#")]),t._v(" 3.1. 组件开发")]),t._v(" "),a("p",[t._v("对于H5、微信小程序、QQ小程序有不同的启动命令：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# h5")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev:mp-weixin\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 微信小程序")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev:mp-qq\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# qq小程序")]),t._v("\n")])])]),a("h3",{attrs:{id:"_3-2-新增组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-新增组件"}},[t._v("#")]),t._v(" 3.2. 新增组件")]),t._v(" "),a("p",[t._v("执行以下命令：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run new:comp\n")])])]),a("p",[t._v("然后交互式的输入组件英文名、中文名等内容即可。")]),t._v(" "),a("h3",{attrs:{id:"_3-3-文档开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-文档开发"}},[t._v("#")]),t._v(" 3.3. 文档开发")]),t._v(" "),a("p",[t._v("文档开发命令：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run docs:dev\n")])])]),a("h3",{attrs:{id:"_3-4-文档、示例部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-文档、示例部署"}},[t._v("#")]),t._v(" 3.4. 文档、示例部署")]),t._v(" "),a("p",[a("code",[t._v("Press Plus")]),t._v("接入了CI，代码推送后会自动构建，并部署H5、微信小程序、QQ小程序三端示例及文档。")]),t._v(" "),a("h3",{attrs:{id:"_3-5-辅助方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-辅助方法"}},[t._v("#")]),t._v(" 3.5. 辅助方法")]),t._v(" "),a("p",[t._v("Press Plus 内部提供了一些提效工具，包括：")]),t._v(" "),a("ul",[a("li",[t._v("提取 "),a("code",[t._v("props/event")]),t._v("，可用于文档")]),t._v(" "),a("li",[t._v("提取 "),a("code",[t._v("class")]),t._v("，可用于 BEM 改造中的映射表")]),t._v(" "),a("li",[t._v("CSS 单位转化，"),a("code",[t._v("rem")]),t._v(" => "),a("code",[t._v("px")])]),t._v(" "),a("li",[t._v("自动添加、修正组件的 "),a("code",[t._v("name")]),t._v(" 属性")]),t._v(" "),a("li",[t._v("自动添加组件的 "),a("code",[t._v("emits")]),t._v(" 属性，Vue3 需要")]),t._v(" "),a("li",[t._v("活动组件增加隐藏 @TIP_STYLE_NAME 样式")]),t._v(" "),a("li",[t._v("活动组件进行 CSS 替换")])]),t._v(" "),a("p",[t._v("使用方法如下：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提取 props")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm run extract:props [componentPath]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run extract:props src/packages/press-act-input-phone-dialog/press-act-input-phone-dialog.vue\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提取 event")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm run extract:event [componentPath]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run extract:event src/packages/press-act-input-phone-dialog/press-act-input-phone-dialog.vue\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提取 class")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm run extract:class [componentPath]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run extract:class src/packages/press-hor-owner-index/press-hor-owner-index.vue\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rem 转 px")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm run rem:px [componentPath]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run rem:px src/packages/press-message-board/press-message-board-input.vue\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加、修正 name 属性")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run add:name\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加 emits 属性")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run add:emits\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 活动组件增加隐藏 TIP_STYLE_NAME 样式")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run act:hide:tip\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 活动组件进行 CSS 替换")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run act:replace:class\n")])])]),a("h2",{attrs:{id:"_4-开发规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-开发规范"}},[t._v("#")]),t._v(" 4. 开发规范")]),t._v(" "),a("h3",{attrs:{id:"_4-1-代码规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-代码规范"}},[t._v("#")]),t._v(" 4.1. 代码规范")]),t._v(" "),a("p",[t._v("需符合公司代码规范。")]),t._v(" "),a("h3",{attrs:{id:"_4-2-提交规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-提交规范"}},[t._v("#")]),t._v(" 4.2. 提交规范")]),t._v(" "),a("p",[t._v("推荐 "),a("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-angular",target:"_blank",rel:"noopener noreferrer"}},[t._v("Angular 规范"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_4-3-命名规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-命名规范"}},[t._v("#")]),t._v(" 4.3. 命名规范")]),t._v(" "),a("ul",[a("li",[t._v("导出对象、类、组件，用大驼峰命名法，首字母大写")]),t._v(" "),a("li",[t._v("导出方法，用小驼峰命名法，首字母小写，如"),a("code",[t._v("loader")]),t._v("、"),a("code",[t._v("post")]),t._v("、"),a("code",[t._v("appBase")]),t._v("、"),a("code",[t._v("getAreaCode")]),t._v("等")]),t._v(" "),a("li",[t._v("文件名用小写+中划线，比如"),a("code",[t._v("message-dialog")]),t._v("，不能用"),a("code",[t._v("messageDialog")])])]),t._v(" "),a("p",[t._v("此外，命名要尽量语义化，不要用 "),a("code",[t._v("data2")]),t._v("、"),a("code",[t._v("dataNew")]),t._v("，这种不清不楚的数字、"),a("code",[t._v("new")]),t._v(" 做结尾。")]),t._v(" "),a("h3",{attrs:{id:"_4-4-文档规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-文档规范"}},[t._v("#")]),t._v(" 4.4. 文档规范")]),t._v(" "),a("ol",[a("li",[t._v("文档 "),a("code",[t._v("props")]),t._v(" 字段为横杠写法，不能为驼峰")])]),t._v(" "),a("p",[t._v("正确写法：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认值")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("show-pic")]),t._v(" "),a("td",[t._v("是否显示图片")]),t._v(" "),a("td",[a("em",[t._v("boolean")])]),t._v(" "),a("td",[a("code",[t._v("false")])])]),t._v(" "),a("tr",[a("td",[t._v("props-data")]),t._v(" "),a("td",[t._v("弹窗数据")]),t._v(" "),a("td",[a("em",[t._v("object")])]),t._v(" "),a("td",[t._v("-")])]),t._v(" "),a("tr",[a("td",[t._v("show-close-btn")]),t._v(" "),a("td",[t._v("是否显示关闭图标")]),t._v(" "),a("td",[a("em",[t._v("boolean")])]),t._v(" "),a("td",[a("code",[t._v("true")])])])])]),t._v(" "),a("p",[t._v("错误写法：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("默认值")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("showPic")]),t._v(" "),a("td",[t._v("是否显示图片")]),t._v(" "),a("td",[a("em",[t._v("boolean")])]),t._v(" "),a("td",[a("code",[t._v("false")])])]),t._v(" "),a("tr",[a("td",[t._v("propsData")]),t._v(" "),a("td",[t._v("弹窗数据")]),t._v(" "),a("td",[a("em",[t._v("object")])]),t._v(" "),a("td",[t._v("-")])]),t._v(" "),a("tr",[a("td",[t._v("showCloseBtn")]),t._v(" "),a("td",[t._v("是否显示关闭图标")]),t._v(" "),a("td",[a("em",[t._v("boolean")])]),t._v(" "),a("td",[a("code",[t._v("true")])])])])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("文档 "),a("code",[t._v("props")]),t._v(" 默认值")])]),t._v(" "),a("p",[a("code",[t._v("string/array/object")]),t._v("，默认为空/空数组/空对象时，一律写为"),a("code",[t._v("-")]),t._v("，不要写 "),a("code",[t._v("''")]),t._v("/"),a("code",[t._v("[]")]),t._v("/"),a("code",[t._v("{}")]),t._v("，冗余且没意义。")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("复杂对象 "),a("code",[t._v("props")])])]),t._v(" "),a("p",[t._v("必须注明每个字段的类型，如下：")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IPropsData")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  dialogClass"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 弹窗额外类名")]),t._v("\n  storePic"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 商户图片")]),t._v("\n  storeName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 商户名称")]),t._v("\n\n  title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  content"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  subContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 额外说明文案")]),t._v("\n  isGold"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// subContent 是否添加 -gold 类名")]),t._v("\n\n  btnText"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 确认按钮文案")]),t._v("\n  cancelBtnText"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取消按钮文案")]),t._v("\n  btnClass"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 确认按钮额外类名")]),t._v("\n  cancelBtnClass"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取消按钮额外类名")]),t._v("\n  \n  hasHook"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否有对勾Dom")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"_4-5-其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-其他"}},[t._v("#")]),t._v(" 4.5. 其他")]),t._v(" "),a("p",[t._v("对外 API 需简单、易记忆，比如"),a("code",[t._v("change")]),t._v("、"),a("code",[t._v("list")]),t._v("，最好一个单词组成，并且不能简写，与业界流行组件库对齐。")]),t._v(" "),a("p",[t._v("不能在组件内部"),a("code",[t._v("console.log")]),t._v("。")]),t._v(" "),a("p",[t._v("类名需符合 "),a("a",{attrs:{href:"https://getbem.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("BEM"),a("OutboundLink")],1),t._v("规范，并以"),a("code",[t._v("press")]),t._v("为前缀。")]),t._v(" "),a("h2",{attrs:{id:"_5-细节"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-细节"}},[t._v("#")]),t._v(" 5. 细节")]),t._v(" "),a("h3",{attrs:{id:"_5-1-rem单位"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-rem单位"}},[t._v("#")]),t._v(" 5.1. rem单位")]),t._v(" "),a("p",[t._v("目前有的组件使用的单位是"),a("code",[t._v("rem")])]),t._v(" "),a("ul",[a("li",[t._v("优势：h5端适配更好，更合适")]),t._v(" "),a("li",[t._v("劣势：在小程序等其他端需要额外的插件来转换")])]),t._v(" "),a("p",[a("code",[t._v("Press Plus")]),t._v(" 并不强制单位，只要组件内部统一即可。")]),t._v(" "),a("h3",{attrs:{id:"_5-2-ui-与逻辑分离"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-ui-与逻辑分离"}},[t._v("#")]),t._v(" 5.2. UI 与逻辑分离")]),t._v(" "),a("p",[t._v("好处如下：")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("分工明确")]),t._v("，重构人员主要负责 UI，前端人员主要负责逻辑")]),t._v(" "),a("li",[t._v("符合"),a("strong",[t._v("单一职责原则")])]),t._v(" "),a("li",[t._v("分离后，UI 和逻辑互不影响，提高各自的"),a("strong",[t._v("扩展性")]),t._v("，增强各自的"),a("strong",[t._v("可复用性")])]),t._v(" "),a("li",[t._v("可视为一种生产者消费者模式，一方提供数据 一方消费数据，"),a("strong",[t._v("解耦")]),t._v("更好，"),a("strong",[t._v("可维护性")]),t._v("更强")]),t._v(" "),a("li",[t._v("体现"),a("strong",[t._v("分而治之")]),t._v("的思想，关注点分离，"),a("strong",[t._v("开发效率")]),t._v("更高")])]),t._v(" "),a("p",[t._v("符合单一职责原则的组件或工具，一定是小的，如果它很大，那么一定可以拆分为更小的单元。对应到组件库这里，Press Plus 可以提供大组件，但必须由一个个小组件构成，而不是很长很大的单文件。")]),t._v(" "),a("p",[t._v("此外，真正的 UI 与逻辑分离，应该是一个交付单元与逻辑的解耦。业务上的交付单元是页面，也就是页面级别拆分为 UI 和逻辑，而不是一层层的 UI 都对应一套逻辑。也就是 "),a("code",[t._v("UI")]),t._v(" 不要套 "),a("code",[t._v("Module")]),t._v("，否则会降低可维护性。")]),t._v(" "),a("h3",{attrs:{id:"_5-3-javascript-优先"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-javascript-优先"}},[t._v("#")]),t._v(" 5.3. Javascript 优先")]),t._v(" "),a("p",[a("code",[t._v("js")]),t._v("比"),a("code",[t._v("html")]),t._v("灵活，能写在"),a("code",[t._v("js")]),t._v("中的，就不要在组件中判断，灵活意味着通用性强，在"),a("strong",[t._v("跨平台、横竖屏、技术栈迁移")]),t._v("时候，"),a("code",[t._v("js")]),t._v("都能够很方便的复用，但是组件就不行。")]),t._v(" "),a("h3",{attrs:{id:"_5-4-项目依赖关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-项目依赖关系"}},[t._v("#")]),t._v(" 5.4. 项目依赖关系")]),t._v(" "),a("p",[t._v("Press Plus 底层依赖 "),a("code",[t._v("t-comm")]),t._v("、"),a("code",[t._v("uni-plugin-light")]),t._v(" 等库。")]),t._v(" "),a("img",{attrs:{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2023/11/own_mike_531f563c0322f19dc1.png",width:"500"}}),t._v(" "),a("h3",{attrs:{id:"_5-5-适配多平台、多场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-适配多平台、多场景"}},[t._v("#")]),t._v(" 5.5. 适配多平台、多场景")]),t._v(" "),a("p",[t._v("Press Plus 在兼容 Vue3 项目、非 "),a("code",[t._v("uni-app")]),t._v(" 环境、APP 环境时，采用的实现方式为，新建工程，并将 Press Plus 组件库作为子仓库。")]),t._v(" "),a("img",{attrs:{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2023/10/own_mike_889e9d727ea8d8b63e.png",width:"500"}}),t._v(" "),a("h3",{attrs:{id:"_5-6-通用-灵活"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-通用-灵活"}},[t._v("#")]),t._v(" 5.6. 通用 & 灵活")]),t._v(" "),a("p",[t._v("下图是 H5、小程序、APP语法灵活度的对比。")]),t._v(" "),a("img",{attrs:{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2023/10/own_mike_76f35297c8da15ecea.png",width:"300"}}),t._v(" "),a("p",[t._v("Press Plus 在编写跨端代码的时候，采用以下原则：")]),t._v(" "),a("ol",[a("li",[t._v("对齐短板，抹平差异，提供通用API")]),t._v(" "),a("li",[t._v("特殊场景下，条件编译，保持灵活性")])]),t._v(" "),a("p",[t._v("这里举一些 H5 环境下渐进式增强的例子：")]),t._v(" "),a("ol",[a("li",[t._v("函数式调用组件的时候，可以动态创建 Dom，无需预埋组件")]),t._v(" "),a("li",[t._v("Popover Plus 点击空白处会收起，即 clickOutSide")]),t._v(" "),a("li",[t._v("List 支持自动检测外层 "),a("code",[t._v("scroller")]),t._v("，即支持任意父级的滚动")])]),t._v(" "),a("h3",{attrs:{id:"_5-7-业务组件的本质"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-7-业务组件的本质"}},[t._v("#")]),t._v(" 5.7. 业务组件的本质")]),t._v(" "),a("p",[t._v("业务组件基本上都是"),a("strong",[t._v("展示型")]),t._v("的，即"),a("strong",[t._v("在什么位置、显示什么样式的、什么内容")]),t._v("。")]),t._v(" "),a("p",[t._v("为什么业务组件很少会有交互很复杂的呢？因为一旦包含复杂交互的部分，一定可以抽象出来，成为一个基础组件 + 业务组件，最终导致业务组件只能是展示类型的。")]),t._v(" "),a("p",[t._v("这样是有好处的，符合单一职责原则，易维护，可复用性强。")]),t._v(" "),a("h3",{attrs:{id:"_5-8-与业务隔离"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-8-与业务隔离"}},[t._v("#")]),t._v(" 5.8. 与业务隔离")]),t._v(" "),a("p",[t._v("首先，并不是从业务中沉淀的就一定是业务组件，业务组件的含义一般是"),a("strong",[t._v("通用性差，但可以解决特定场景问题")]),t._v("，变化形式不多，"),a("strong",[t._v("灵活性差，参数没有基础组件多")]),t._v("。")]),t._v(" "),a("p",[a("code",[t._v("Press Plus")]),t._v("的组件、逻辑都应该减少与业务的耦合，保持稳定。基础组件很容易做到，也很容易判断是否耦合，对于业务中沉淀下来的，如何做到呢？")]),t._v(" "),a("ul",[a("li",[t._v("不能存在业务状态码，多重判断逻辑应该前置完成")]),t._v(" "),a("li",[t._v("关注点分离，关注组件自身，而非业务")]),t._v(" "),a("li",[t._v("最少知识原则，只传入必要的参数")])]),t._v(" "),a("p",[t._v("举个例子，赛程树组件中点击轮次 Tab 的事件，不能命名为 "),a("code",[t._v("jumpToSetPage")]),t._v("，需改为与业务无关的 "),a("code",[t._v("clickRoundTab")]),t._v("，因为跳转轮次设置页面是业务设定，并不一定稳定，有可能过几天需求就改了，而点击 Tab 事件却是实实在在的，永久的。")]),t._v(" "),a("p",[t._v("另外，赛程树的文案"),a("strong",[t._v("不能由是业务状态驱动，而应该UI驱动")]),t._v("。下面是改之前的代码，与业务过度耦合，业务如果增加比赛状态，必然会改动组件。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 预览状态 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("isPreview"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("tip-match-current-pk-tip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 编号 --\x3e")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("battleDetail.bracketIdDesc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("tip-match-num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    {{ battleDetail.bracketIdDesc }}\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token entity named-entity",title:"&nbsp;"}},[t._v("&nbsp;")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("isAdmin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    {{ isSchEnd ? '已结束' : startBattleTypeDesc }}\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 已结束 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-else-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("isSchEnd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("tip-match-current-pk-tip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("battleDetail.bracketIdDesc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("tip-match-num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    {{ battleDetail.bracketIdDesc }}\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ battleEndTime }}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    已结束\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("可以改成业务无关的UI状态，在JS中前置判断业务状态码，得出UI状态。核心就是"),a("strong",[t._v("在什么位置显示什么样式的什么内容")]),t._v("。")]),t._v(" "),a("ul",[a("li",[t._v("是否显示带背景的文案，"),a("code",[t._v("bracketIdDesc")])]),t._v(" "),a("li",[t._v("是否显示不带背景的标签，"),a("code",[t._v("timeDesc")])]),t._v(" "),a("li",[t._v("是否显示另一个不带背景的标签，及它是否可以文字高亮，"),a("code",[t._v("statusDesc")]),t._v("、"),a("code",[t._v("isStatusHighList")])]),t._v(" "),a("li",[t._v("是否展示直播图标，"),a("code",[t._v("showLiveIcon")])]),t._v(" "),a("li",[t._v("是否展示视频号图标，"),a("code",[t._v("showChannelsIcon")])])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("press-schedule-team-tips"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("scheGroupInfo.bracketIdDesc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("press-schedule-team-tip press-schedule-team-tip--bg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    {{ scheGroupInfo.bracketIdDesc }}\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("scheGroupInfo.timeDesc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("press-schedule-team-tip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    {{ scheGroupInfo.timeDesc }}\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("scheGroupInfo.statusDesc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("press-schedule-team-tip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{\n      'press-schedule-team-tip--light': scheGroupInfo.isStatusHighList\n    }"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    {{ scheGroupInfo.statusDesc }}\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("scheGroupInfo.showLiveIcon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("press-schedule-team-tip-icon press-schedule-team-tip-icon--green iconfont icon-live"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click.stop")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("onWatchBattle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("scheGroupInfo.showChannelsIcon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("press-schedule-team-tip-icon iconfont icon-video-number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("上面的改动并不是最佳的，还可以继续优化。比如，直播图标和视频号图标，可以由参数传入，以此支持更多图标类型。命名可以更脱离业务，不命名为"),a("code",[t._v("timeDesc")]),t._v("、"),a("code",[t._v("statusDesc")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"_6-活动组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-活动组件"}},[t._v("#")]),t._v(" 6. 活动组件")]),t._v(" "),a("h3",{attrs:{id:"_6-1-介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-介绍"}},[t._v("#")]),t._v(" 6.1. 介绍")]),t._v(" "),a("p",[a("code",[t._v("Press Plus")]),t._v(" 中的活动组件，是一类特殊的组件，大多可以用 "),a("code",[t._v("@TIP_STYLE_NAME")]),t._v(" 指定不同游戏类型的样式，同时使用方也必须引入"),a("a",{attrs:{href:"https://novlan1.github.io/uni-plugin-light/zh/loader/cross-game-style.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("相应的 "),a("code",[t._v("loader")]),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"_6-2-新增游戏样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-新增游戏样式"}},[t._v("#")]),t._v(" 6.2. 新增游戏样式")]),t._v(" "),a("p",[t._v("以 "),a("code",[t._v("press-act-award-dialog")]),t._v(" 为例")]),t._v(" "),a("ol",[a("li",[t._v("启动项目，"),a("code",[t._v("npm run init && npm run dev")])]),t._v(" "),a("li",[t._v("在 "),a("code",[t._v("press-act-award-dialog/css")]),t._v(" 目录下，新建对应游戏的英文名，比如 "),a("code",[t._v("abc.scss")])]),t._v(" "),a("li",[t._v("执行 "),a("code",[t._v("npm run gen:style")]),t._v("，生成 "),a("code",[t._v("styleList")])]),t._v(" "),a("li",[t._v("在示例项目面板，选择此次新增的样式")])]),t._v(" "),a("p",[t._v("接下来就可以开发了。")]),t._v(" "),a("img",{attrs:{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2023/12/own_mike_ecc38b3b6f256226e9.png",width:"280"}}),t._v(" "),a("h3",{attrs:{id:"_6-3-开发规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-开发规范"}},[t._v("#")]),t._v(" 6.3. 开发规范")]),t._v(" "),a("p",[t._v("总体规范：")]),t._v(" "),a("ol",[a("li",[t._v("顶层结构需要加上 "),a("code",[t._v("press-act")]),t._v(" 类，以及条件式的 "),a("code",[t._v("press-act--hidden-tip")]),t._v("，用来支持隐藏 "),a("code",[t._v("@TIP_STYLE_NAME")]),t._v(" 样式")])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("[getActClass('benefit'), {\n    'press-act--hidden-tip': hideTipStyle,\n  }, 'press-act']"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("不允许只有 "),a("code",[t._v("html")]),t._v(" 结构，没有样式。结构和样式是一个整体，缺乏样式难以调试，后期难维护。可以加参数隐藏，不可以没有")]),t._v(" "),a("li",[t._v("始终向后兼容，新加的结构需要加参数控制，不要影响之前项目")]),t._v(" "),a("li",[t._v("新加的结构不要使用 "),a("code",[t._v("getActClass")]),t._v("，"),a("code",[t._v("getActClass")]),t._v(" 只是为了兼容老类名，请直接在 Vue 上写类名，简单直观")]),t._v(" "),a("li",[t._v("组件样式必须加 "),a("code",[t._v("scoped")]),t._v("，不要尝试污染其他组件")])]),t._v(" "),a("p",[t._v("样式规范：")]),t._v(" "),a("ol",[a("li",[t._v("不可以在组件样式内声明字体，比如 "),a("code",[t._v("@font-face")]),t._v("，请在业务中自行声明")]),t._v(" "),a("li",[t._v("不可以在编写其他组件的样式，否则难以维护，子组件除外")]),t._v(" "),a("li",[t._v("组件样式不可以加 "),a("code",[t._v("!important")]),t._v("，否则业务侧难以更改样式")]),t._v(" "),a("li",[t._v("后续开发请使用 "),a("code",[t._v("press")]),t._v(" 开头的类名，老类名（"),a("code",[t._v("tip")]),t._v(" 开头）会在下个大版本时去除")]),t._v(" "),a("li",[t._v("不要频繁在页面中覆盖组件样式，请直接在组件库中修改，一次性活动除外")])])])}),[],!1,null,null,null);s.default=e.exports}}]);